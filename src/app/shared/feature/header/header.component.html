<div class="header">
  <ng-container *ngIf="!isHomepage; else titleWithoutLink">
    <a routerLink="/" class="header__title">
      <!-- <h1>BPCN</h1> -->
      <h1>Black Prostate Cancer Network</h1>
    </a>
  </ng-container>
  <ng-template #titleWithoutLink>
    <!-- <h1 class="header__title">BPCN</h1> -->
    <h1 class="header__title">Black Prostate Cancer Network</h1>
  </ng-template>
  <app-user-info></app-user-info>
</div>

<nav class="menu" [ngClass]="{ 'menu--mobile': isMobile, 'menu--open': isMobile && isNavOpen }">
  <button class="menu__toggle" *ngIf="isMobile" (click)="toggleMobileNavigation()">
    <span class="material-symbols-outlined">menu</span>
    <span class="menu__toggle__label">Toggle navigation</span>
  </button>

  <ul class="menu__list" [ngClass]="{ 'hidden': isMobile && !isNavOpen }">
    <li *ngFor="let link of pageStore.primaryNavLinksComputed$$()">
      <a [routerLink]="['/', link.slug]" routerLinkActive="selected"
        (click)="closeNavOnLinkClick()"
        [routerLinkActiveOptions]="{ exact: true }">{{ link.title }}</a>
    </li>

    <li *ngIf="'news' | featureFlag">
      <a (click)="closeNavOnLinkClick()" routerLink="/news" routerLinkActive="selected">News</a>
    </li>
    <li *ngIf="'events' | featureFlag">
      <a (click)="closeNavOnLinkClick()" routerLink="/events" routerLinkActive="selected">Events</a>
    </li>
    <li *ngIf="'siteMap' | featureFlag">
      <a (click)="closeNavOnLinkClick()" routerLink="/site-map" routerLinkActive="selected">Site map</a>
    </li>
  </ul>

  <a *ngIf="'search' | featureFlag" class="link link--search" (click)="toggleSearch()">
    <span class="label">Search</span>
    <span class="material-symbols-outlined">search</span>
  </a>

  <a *ngIf="'accessibility' | featureFlag" class="link link-a11y" (click)="toggleAccessibility()">
    <span class="label">Accessibility</span>
    <span class="material-symbols-outlined">accessibility_new</span>
  </a>
</nav>
<app-search *ngIf="isSearchOpen" (close)="toggleSearch()"></app-search>
<app-accessibility *ngIf="isAccessibilityOpen" (close)="toggleAccessibility()"></app-accessibility>
<!-- TODO: Aria roles ?  -->
<!-- TODO: No keyboard control over search and a11y links? -->
<!-- TODO: Need a focus trap in the search fucntionality -->
 <!-- TODO: Need a focus trap in the a11y functionality -->
